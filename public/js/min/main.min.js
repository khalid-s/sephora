var $body,$html,carouselOnHomepage,carouselsForProducts,checkIeVersion,handleDropdown,handleFaqClick,handleOrientationEvent,handlePopupClick,handleSearchResult,handleSocialLinkHover,handleTocAndTab,handleTocClick,handleTouchEffect,handleTouchEffectEnd,handleTouchEffectStart,homepagePanels,ie,initialize,isIOS,isMobile,lastUpdate,onContainerClick,onOrientationChange,onParentClick,productCarouselFor,registerContainerDropdownEvent,resetYoutubeIframe,setParentLinkClickable,toggleOpened,unregisterContainerDropdownEvent,updateHomepagePanels,updateTemplate4Grid;isMobile=!1,$html=null,$body=null,isIOS=!1,lastUpdate=null,homepagePanels=[],checkIeVersion=function(){var e,t,n,o;for(n=void 0,o=3,t=document.createElement("div"),e=t.getElementsByTagName("i");;)if(t.innerHTML="<!--[if gt IE "+ ++o+"]><i></i><![endif]-->",null==e[0])break;return o>4?o:null},ie=checkIeVersion(),initialize=function(){var e,t;return t=new google.maps.Geocoder,e={address:"Paris"},t.geocode(e,function(e,t){var n,o,i,a;return t===google.maps.GeocoderStatus.OK?(n=new google.maps.LatLng(e[0].geometry.location.hb,e[0].geometry.location.ib),a=new google.maps.LatLng(60,105),i={zoom:8,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP},o=new google.maps.Map(document.getElementById("map-canvas"),i),o.setCenter(e[0].geometry.location)):void 0})},onParentClick=function(e,t){return $$.addEvent("click",e,function(){return window.location=t.getAttribute("href")})},setParentLinkClickable=function(e,t){var n,o,i,a,l,r;for(l=Sizzle(e),r=[],i=0,a=l.length;a>i;i++)n=l[i],o=$$.closest(n,t),$$.addClass(o,"clickable"),r.push(onParentClick(o,n));return r},handleTouchEffectStart=function(){return $$.addEvent("touchmove",this,function(){return $$.removeClass(this,"touch")}),$$.addClass(this,"touch")},handleTouchEffectEnd=function(){return $$.removeClass(this,"touch")},handleTouchEffect=function(e){var t,n,o,i,a;for(i=Sizzle(e),a=[],n=0,o=i.length;o>n;n++)t=i[n],$$.addEvent("touchstart",t,handleTouchEffectStart),a.push($$.addEvent("touchend",t,handleTouchEffectEnd));return a},handlePopupClick=function(e){return $$.addEvent("click",e,function(t){return $$.preventDefault(t),window.open(e.href,"popup")})},updateHomepagePanels=function(){var e,t,n,o,i,a,l,r,d,s;if(homepagePanels.length){for(r=0,d=homepagePanels.length;d>r;r++)e=homepagePanels[r],e.removeAttribute("style"),null!=(s=e.querySelector(".header"))&&(s.style.height="auto");if(isMobile&&(a=Sizzle("#homepage > .panels > li:not(:nth-child(1)):not(:nth-child(4)) > .panel.image .content:first-child"),1===a.length)){if($$.heightFor(a[0])<150)return setTimeout(updateHomepagePanels,500),void 0;if(o=a[0].parentNode.parentNode,l=Sizzle("#homepage > .panels > li:not(:nth-child(1)):not(:nth-child(4)) > .panel.image .content:nth-child(2)"),1===l.length){if(i=l[0].parentNode.parentNode,$$.heightFor(o)>$$.heightFor(i))return t=$$.heightFor(i.querySelector(".header")),n=$$.heightFor(o.querySelector(".content"))-$$.heightFor(i.querySelector(".content")),i.querySelector(".header").style.height=""+n+"px";if($$.heightFor(o)<$$.heightFor(i))return i.children[0].setAttribute("style","height: "+$$.heightFor(o.children[0])+"px !important")}}}},updateTemplate4Grid=function(e,t,n,o,i){var a,l,r,d,s,c,u,h,p,$,m,g,f,v,w,b,z;if(null==i&&(i=0),s=Sizzle(e),0!==s.length){for($=[],m=0,v=null,p=0,t=3,z=0,isMobile&&(t=o),h=function(){var e,t,n,o;if($.length&&m){for(o=[],t=0,n=$.length;n>t;t++)e=$[t],o.push(e.setAttribute("style","height: "+m+"px !important"));return o}},g=0,w=s.length;w>g;g++)r=s[g],r.setAttribute("style","");if(1!==t){for(c=1,f=0,b=s.length;b>f;f++)r=s[f],l=Math.ceil((c-z)/t),u=$$.getOffset(r),n&&c>0&&3>=c&&3===t||l===p||(h(),p=l,v=0,m=0,$=[]),v=u.left,a=r.getBoundingClientRect(),d=parseInt(a.bottom,10)-parseInt(a.top,10),d>m&&(m=d),$.push(r),c+=1,3===t&&(t=4,z=i);return h()}}},onOrientationChange=function(e){var t,n,o,i,a,l,r,d,s,c,u,h,p,$,m,g,f,v,w,b,z,k;if(!(null!=lastUpdate&&lastUpdate>e)){if(lastUpdate=new Date,updateHomepagePanels(),updateTemplate4Grid("#best-sellers li:not(:first)",3,4,2,3),isMobile)for(k=Sizzle("ol.stores > li"),v=0,b=k.length;b>v;v++)a=k[v],a.setAttribute("style","");else updateTemplate4Grid("ol.stores > li",3,null,null,0);switch(s=window.orientation,u=screen.width,c=screen.height,s){case 90:case-90:s="landscape",isIOS&&(u=screen.height,c=screen.width);break;default:s="portrait"}r=document.getElementById("viewport"),null!=r&&(isMobile?r.setAttribute("content","width=device-width, maximum-scale=1, minimum-scale=1"):(g=screen.width/980,r.setAttribute("content","width=980, maximum-scale="+g+", minimum-scale="+g+", user-scalable=no, target-densitydpi=high-dpi"))),$$.removeClass($body,"landscape portrait"),$$.addClass($body,s),$=document.styleSheets[0];try{$.addRule(".xxxxxx","position: relative")}catch(y){}if(homepagePanels.length)for(p=Sizzle(".social-links li a"),i="data-desktop",isMobile&&(i="data-mobile"),w=0,z=p.length;z>w;w++)h=p[w],l=h.querySelector("img"),l.src=l.getAttribute(i);return t=Sizzle("#container > aside"),t.length&&(t=t[0],n=t.querySelector("ul"),o=t.getBoundingClientRect(),m=parseInt(o.top,10),f=parseInt($$.getWindowHeight(),10),d=f-300,n.style.height=""+d+"px",n.scrollHeight>t.scrollHeight?($$.show(t.querySelector(".move-up")),$$.show(t.querySelector(".move-down"))):($$.hide(t.querySelector(".move-up")),$$.hide(t.querySelector(".move-down")),n.style.height="")),window.setTimeout(function(){return $body.webkitTransform="rotateZ(0deg)",$body.webkitTransform="none"},200),!0}},productCarouselFor=function(e){var t,n,o,i,a,l,r,d,s,c;for(a=2,$$.hasClass(e,"big-big")?a=4:$$.hasClass(e,"big")&&(a=3),t=$$.closest(e,"article"),$$.hasClass(t,"template-1")?a=2:"category"===t.id||$$.hasClass(t,"template-lp-2")?a=3:$$.hasClass(t,"template-lp-3")&&(a=4),isMobile&&(a=2),r=new Swipe(e,{continuous:!1,nbPerSlide:a}),o=e.querySelector("a.move-left"),i=e.querySelector("a.move-right"),l=function(e,t,n){return e===n-1?$$.hide(i):$$.show(i),0===e?$$.hide(o):$$.show(o)},c=["ready","willSlideTo","didSlideTo"],d=0,s=c.length;s>d;d++)n=c[d],r.on(n,l);return $$.addEvent("click",o,function(e){return $$.preventDefault(e),r.prev(),!1}),$$.addEvent("click",i,function(e){return $$.preventDefault(e),r.next(),!1})},carouselsForProducts=function(){var e,t,n,o,i,a;if(t="#homepage .carousel",e=Sizzle(t),0===e.length){for(t=".carousel",n=Sizzle(t),a=[],o=0,i=n.length;i>o;o++)e=n[o],e.innerHTML='<a href="#" class="move-left"></a>'+e.innerHTML+'<a href="#" class="move-right"></a>',productCarouselFor(e);return a}},handleSocialLinkHover=function(e){var t,n,o,i,a,l;for(o=e.querySelector("img"),l=["desktop","mobile"],i=0,a=l.length;a>i;i++)t=l[i],n=new Image,n.src=o.getAttribute("data-"+t);return $$.addEvent("mouseover",e,function(){return o.src=isMobile?o.getAttribute("data-desktop"):o.getAttribute("data-mobile")}),$$.addEvent("mouseout",e,function(){return o.src=isMobile?o.getAttribute("data-mobile"):o.getAttribute("data-desktop")})},carouselOnHomepage=function(){var e,t,n,o,i,a,l,r,d,s;if(i="#homepage .carousel",o=Sizzle(i),0!==o.length&&(t=o[0],n=t.children.length>0&&t.children[0].children.length>1,n=!0,n&&(t.innerHTML=t.innerHTML+'<a href="#" class="previous"></a><a href="#" class="next"><span class="position-in-slides"></span></a>'),e=new Swipe(t,{continuous:!0,delay:5e3}),n)){for(l=function(e,t,n){return Sizzle(""+i+" .position-in-slides")[0].innerHTML=e+1+"/"+n},s=["ready","willSlideTo","didSlideTo"],r=0,d=s.length;d>r;r++)a=s[r],e.on(a,l);$$.addEvent("click",Sizzle(""+i+" a.previous")[0],function(t){return $$.preventDefault(t),e.prev(),!1}),$$.addEvent("click",Sizzle(""+i+" a.next")[0],function(t){return $$.preventDefault(t),e.next(),!1})}},toggleOpened=function(e){return $$.toggleClass(e,"opened")},handleFaqClick=function(e){return $$.addClass(e,"clickable"),$$.addEvent("click",e,function(t){var n,o,i,a,l;for($$.preventDefault(t),$$.hasClass(e,"closed")?($$.addClassToMany("#faq .content > dl > dt","closed"),$$.removeClass(e,"closed")):$$.addClassToMany("#faq .content > dl > dt","closed"),a=Sizzle("#faq .content > dl"),l=[],o=0,i=a.length;i>o;o++)n=a[o],$$.addClass(n,"z"),l.push($$.removeClass(n,"z"));return l})},onContainerClick=function(e){var t;return t=Sizzle(".dropdown.opened"),$$.preventDefault(e),$$.removeClassToMany(".dropdown","opened"),unregisterContainerDropdownEvent(),!1},registerContainerDropdownEvent=function(){return Modernizr.touch&&!isMobile?$$.addEvent("click",Sizzle("#container, #container-alt")[0],onContainerClick):void 0},unregisterContainerDropdownEvent=function(){return Sizzle("#container, #container-alt")[0].removeEventListener("click",onContainerClick)},handleDropdown=function(e){return $$.hasClass($html,"touch")?$$.addEvent("click",e.querySelector("a"),function(t){var n;return n=$$.hasClass(e,"opened"),n?!0:($$.preventDefault(t),$$.removeClassToMany(".dropdown","opened"),$$.addClass(e,"opened"),registerContainerDropdownEvent(),!1)}):($$.addEvent("mouseover",e,function(){return $$.addClass(e,"opened")}),$$.addEvent("mouseout",e,function(){return $$.removeClass(e,"opened")}))},handleTocClick=function(e){return $$.addEvent("click",e,function(t){var n,o;return $$.preventDefault(t),n=e.getAttribute("href"),o=Sizzle(""+n+".tab"),o.length?(o=o[0],$$.addClassToMany(".tab","hidden"),$$.removeClass(o,"hidden"),$$.removeClassToMany(".toc li","active"),$$.addClass(closest(e,"li"),"active")):void 0})},handleTocAndTab=function(e,t){var n,o,i,a,l,r,d,s,c;for(i=$$.toArray(e.children),o=$$.toArray(t.children),s=o.slice(1),a=0,r=s.length;r>a;a++)n=s[a],$$.addClass(n,"hidden");for($$.addClass(i[0],"active"),c=[],l=0,d=i.length;d>l;l++)n=i[l],c.push(handleTocClick(n.querySelector("a")));return c},handleSearchResult=function(e){return $$.addEvent("click",$$.closest(e,"article"),function(){var t;return t=e.getAttribute("href"),window.location=t})},handleOrientationEvent=function(e){return null!=ie&&9>ie||Modernizr.touch&&"resize"===e?void 0:$$.addEvent(e,window,function(){return setTimeout(function(){return onOrientationChange(new Date)},0)})},resetYoutubeIframe=function(e){var t;return t=e.src,e.src=null,e.src=t},$$.bindReady(function(){var e,t,n,o,i,a,l,r,d,s,c,u,h,p,$,m,g,f,v,w,b,z,k,y,C,S,E,T,x,M,q,O,P,A,D,I,L,H,F,B,R,N,G,W,j,U,V,Y,_,K;for(N=Sizzle(".carousel"),y=0,T=N.length;T>y;y++)a=N[y],a.style.visibility="hidden";for($html=Sizzle("html")[0],$body=Sizzle("body")[0],isIOS=navigator.userAgent.match(/(iPad|iPhone|iPod)/g),isMobile=null!=window.matchMedia&&(window.matchMedia("only screen and (max-width : 650px)").matches||window.matchMedia("only screen and (min-device-width : 719px) and (max-device-width : 721px) and (-webkit-min-device-pixel-ratio : 2) and (orientation : portrait)").matches||window.matchMedia("only screen and (max-device-width: 1280px) and (orientation:landscape) and (resolution: 306dpi)").matches),navigator.userAgent.match(/(BlackBerry)/g)&&(isMobile=!0),homepagePanels=Sizzle("#homepage > .panels > li > .panel.image"),G=Sizzle(".carousel"),C=0,x=G.length;x>C;C++)a=G[C],a.style.visibility="hidden",a.style.height=0;for(W=["orientationchange","resize","onresize"],S=0,M=W.length;M>S;S++)r=W[S],handleOrientationEvent(r);if(a=Sizzle("#container > aside .content"),a.length)for(a=a[0],a.innerHTML='<a href="#" class="move-up">^</a>'+a.innerHTML+'<a href="#" class="move-down">v</a>',a=Sizzle("#container > aside .content"),a=a[0],l=a.querySelector("ul"),$$.addEvent("mousewheel",l,function(e){return this.scrollTop-=e.wheelDeltaY,$$.preventDefault(e)}),p=a.querySelector(".move-up"),u=a.querySelector(".move-down"),h=function(){return l.scrollTop-=20},c=function(){return l.scrollTop+=20},s=null,$$.addEvent("click",p,function(e){return $$.preventDefault(e),h()}),$$.addEvent("mousedown",p,function(e){return $$.preventDefault(e),s=setInterval(h,50),!1}),$$.addEvent("click",u,function(e){return $$.preventDefault(e),c()}),$$.addEvent("mousedown",u,function(e){return $$.preventDefault(e),s=setInterval(c,50),!1}),j=[p,u],E=0,q=j.length;q>E;E++)i=j[E],$$.addEvent("mouseup",i,function(){return clearInterval(s),!1});if(onOrientationChange(new Date),carouselOnHomepage(),carouselsForProducts(),Modernizr.touch&&(handleTouchEffect("a"),handleTouchEffect("label")),$$.addEvent("click",Sizzle("#main-menu-link")[0],function(){var e,t,n;for(toggleOpened(Sizzle('nav[role="navigation"]')[0]),n=Sizzle("iframe.player"),t=0,e=n.length;e>t;t++)a=n[t],resetYoutubeIframe(a);return!1}),!isMobile)for(U=Sizzle(".dropdown"),L=0,O=U.length;O>L;L++)a=U[L],handleDropdown(a);FastClick.attach(document.body),"ontouchstart"in document&&$$.removeClass($html,"no-touch"),V=Sizzle("article.search-result a");for(H=0,P=V.length;P>H;H++)a=V[H],handleSearchResult(a);for(k=navigator.userAgent||navigator.vendor||window.opera,k.indexOf("Mobile")>-1?(k.indexOf("Chrome")>-1?$$.addClass($html,"chrome-mobile"):k.indexOf("Android")>-1?$$.addClass($html,"android"):k.indexOf("Safari")>-1&&$$.addClass($html,"ios"),k.indexOf("iPad")>-1&&$$.addClass($html,"ipad"),k.indexOf("Android 2.3")>-1&&$$.addClass($html,"gingerbread")):k.indexOf("Android")>-1&&($$.addClass($html,"android-desktop"),k.indexOf("Chrome")>-1&&$$.addClass($html,"chrome-android")),k.match(/OS 5(_\d)+ like Mac OS X/i)&&$$.addClass($html,"ios5"),/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(k)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(k.substr(0,4))?$$.addClass($html,"on-mobile"):$$.addClass($html,"on-desktop"),-1!==navigator.appVersion.indexOf("Win")&&$$.addClass($html,"win"),setParentLinkClickable("ol.stores article.store footer a",".store"),setParentLinkClickable("ul.full article .more-link","article"),setParentLinkClickable("article.product.top header a","article"),$$.addClassToMany("#faq .content > dl > dt:not(:first)","closed"),Y=Sizzle("#faq .content > dl > dt"),F=0,A=Y.length;A>F;F++)a=Y[F],handleFaqClick(a);for(_=Sizzle(".social-links li a"),B=0,D=_.length;D>B;B++)a=_[B],handleSocialLinkHover(a);isMobile||Modernizr.touch||(e=Sizzle("#container > aside"),e.length&&(e=e[0],t=$$.getOffset(e),f=parseInt(t.top,10),o=e.getBoundingClientRect(),n=parseInt(o.right,10)-parseInt(o.left,10),z=function(){var t;t=$$.getScrollTop(),t>=f-20?(e.style.position="fixed",e.style.top="20px",e.style.width=""+n+"px"):(e.style.position="static",e.style.width="")},"ontouchstart"in document&&$$.addEvent("touchmove",window,function(){return z()}),$$.addEvent("scroll",window,function(){return setTimeout(z,50)}))),w=Sizzle(".toc"),v=Sizzle(".tabs"),w.length&&v.length&&handleTocAndTab(w[0],v[0]),null!==document.getElementById("map-canvas")&&"undefined"!=typeof google&&google.maps.event.addDomListener(window,"load",initialize),b=Sizzle("#brands .replicate"),b.length&&(b=b[0],$$.addEvent("change",b,function(){return window.location=b.options[b.selectedIndex].value})),K=Sizzle("a[data-popup]");for(R=0,I=K.length;I>R;R++)a=K[R],handlePopupClick(a);return $=Sizzle("#social-network-wall"),$.length&&($=$[0],m=Sizzle("h1 span",$),d=Sizzle("h1",$),m.length)?(m=m[0],d=d[0],g=document.createElement("span"),g.className="test-social-network-wall",document.body.appendChild(g),g.innerHTML=m.innerHTML.replace(/<(?:.|\n)*?>/gm,""),d.style.width=isMobile?""+((g.clientWidth||g.offsetWidth)+30)+"px":""+((g.clientWidth||g.offsetWidth)+70)+"px",g.parentNode.removeChild(g)):void 0});